"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var s=e,n=t,o=a;u=l=i=void 0,r=!1,null===s&&(s=Function.prototype);var u=Object.getOwnPropertyDescriptor(s,n);if(void 0!==u){if("value"in u)return u.value;var i=u.get;return void 0===i?void 0:i.call(o)}var l=Object.getPrototypeOf(s);if(null===l)return void 0;e=l,t=n,a=o,r=!0}},_react=require("react"),_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),EasyDay=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.labels=[],this.state={bitmask:0}}return _inherits(t,e),_createClass(t,null,[{key:"defaultProps",value:{days:0,useDarkTheme:!1,showLetters:!0,showLongNames:!1,showShortNames:!1,maxSelectedDays:7,minSelectedDays:0,onChange:function(){}},enumerable:!0},{key:"propTypes",value:{days:_react2["default"].PropTypes.oneOfType([_react2["default"].PropTypes.number,_react2["default"].PropTypes.array,_react2["default"].PropTypes.object]),useDarkTheme:_react2["default"].PropTypes.bool,showLetters:_react2["default"].PropTypes.bool,showLongNames:_react2["default"].PropTypes.bool,showShortNames:_react2["default"].PropTypes.bool,maxSelectedDays:_react2["default"].PropTypes.number,minSelectedDays:_react2["default"].PropTypes.number,onChange:_react2["default"].PropTypes.func},enumerable:!0},{key:"dayLetters",value:["S","M","T","W","T","F","S"],enumerable:!0},{key:"longDayNames",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],enumerable:!0},{key:"shortDayNames",value:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."],enumerable:!0}]),_createClass(t,[{key:"componentDidMount",value:function(){if(this.props.minSelectedDays>this.props.maxSelectedDays)throw new Error("EasyDay cannot have a minimum selected amount that is greater than its maximum selected amount.");this.labels=this.props.showLetters?t.dayLetters:this.props.showLongNames?t.longDayNames:t.shortDayNames;var e=0;switch(typeof this.props.days){case"number":e=this.props.days;break;case"array":e=t.dayArrayToBitmask(this.props.days);break;case"object":e=t.dayObjectToBitmask(this.props.days)}this.setState({bitmask:e})}},{key:"isDaySet",value:function(e){return(this.state.bitmask&Math.pow(2,e))>0}},{key:"toggleDay",value:function(e){var a=void 0;if(1==this.props.maxSelectedDays)a=Math.pow(2,e),a==this.state.bitmask&&(a=0),this.setState({bitmask:a},this.handleChange);else{a=this.state.bitmask^=1<<e;var r=t.countSetBytes(a);r<=this.props.maxSelectedDays&&r>=this.props.minSelectedDays&&this.setState({bitmask:a},this.handleChange)}}},{key:"handleChange",value:function(){this.props.onChange(this.state.bitmask)}},{key:"render",value:function(){var e=this,a=t.dayLetters.map(function(t,a){var r=e.isDaySet(a)?"checked":"";return _react2["default"].createElement("div",{className:"day",key:""+a},_react2["default"].createElement("div",{className:"inner "+r,onClick:e.toggleDay.bind(e,a)},e.labels[a]))},this),r=_classnames2["default"]("easy-day",{light:!this.props.useDarkTheme,dark:this.props.useDarkTheme});return _react2["default"].createElement("div",{className:r},_react2["default"].createElement("div",{className:"days"},a))}}],[{key:"dayObjectToBitmask",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={sunday:0,monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,saturday:0};e=_extends({},t,e);var a=0;return a+=1*e.sunday,a+=2*e.monday,a+=4*e.tuesday,a+=8*e.wednesday,a+=16*e.thursday,a+=32*e.friday,a+=64*e.saturday}},{key:"countSetBytes",value:function(e){for(var t=0,a=7;a--;)t+=1*((e&Math.pow(2,a))>0);return t}},{key:"dayArrayToBitmask",value:function(e){var t=0;return e.map(function(e,a){t+=e*Math.pow(2,a)}),t}}]),t}(_react2["default"].Component);exports["default"]=EasyDay,module.exports=exports["default"];